A minimal example of evaluating the original input signal with speech enhancement metrics
-----

### Prerequisite
1. pip install espnet

### Steps
1. Copy this directory to anywhere you like, say ${demo_dir}
2. Prepare a [Kaldi-style](https://kaldi-asr.org/doc/data_prep.html) data directory under ${demo_dir}/dump/raw, with the structure like:
    ```
    ${demo_dir}
    ├── cmd.sh
    ├── dump/raw
    │   ├── dev
    │   │   ├── spk1.scp
    │   │   ├── spk2.scp
    │   │   ├── ...
    │   │   └── wav.scp
    │   └── test
    │       ├── spk1.scp
    │       ├── spk2.scp
    │       ├── ...
    │       └── wav.scp
    ├── path.sh
    ├── run.sh
    ├── scripts/utils/show_enh_score.sh
    └── utils/
    ```
    * **You need to create the following files by yourself:**
        * The `spk?.scp` file in each subset directory contains the clean reference signals corresponding to different speakers for every utterance ID.
        * The `wav.scp` file in each subset directory contains the input audio path for every utterance ID.
3. (Optional) Modify `cmd_backend='local'` in [cmd.sh](https://github.com/Emrys365/code_examples/blob/master/espnet2/enh_evaluate_original_input/cmd.sh) according to your needs.
4. Run [run.sh](https://github.com/Emrys365/code_examples/blob/master/espnet2/enh_evaluate_original_input/run.sh) to start evaluation:
    ```bash
    ./run.sh --inference_nj 10 --ref_channel 0 --spk_num 2 --test_sets "dev test"
    cat exp/original_input_raw/RESULTS.TXT
    ```

    <details><summary>Expand to see an example output</summary><div>

    ```bash
    $ ./run.sh --inference_nj 10 --ref_channel 0 --spk_num 2 --test_sets "dev test"
    
    /mnt/xlancefs/home/wyz97/anoaconda/venv/envs/py37/bin/python3 /mnt/xlancefs/home/wyz97/work_space/espnet/espnet2/bin/enh_train.py --print_config --optim adam
    ```

    ```bash
    $ cat exp/original_input_raw/RESULTS.TXT
    <!-- Generated by scripts/utils/show_enh_score.sh -->
    # RESULTS
    ## Environments
    - date: `Mon May 17 12:37:48 CST 2021`
    - python version: `3.7.10 (default, Feb 26 2021, 18:47:35)  [GCC 7.3.0]`
    - espnet version: `espnet 0.9.9`
    - pytorch version: `pytorch 1.5.1`
    - Git hash: ``
    - Commit date: ``


    ## original_input_raw

    config: original_input

    |dataset|STOI|SAR|SDR|SIR|SI_SNR|
    |---|---|---|---|---|---|
    |enhanced_dev|0.738454|75.508|0.0665771|0.0665776|-0.0081286|
    |enhanced_test|0.727894|74.869|0.0713591|0.0713595|0.0110011|
    ```

    </div></details>
